=========================================================================================
                PRISMA MODEL RELATIONS & ENUMS 
=========================================================================================

=========================================================================================
# 0. ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶è‡¶á ‡¶Ö‡¶Ç‡¶∂‡ßá ‡¶ï‡ßÄ ‡¶∂‡¶ø‡¶ñ‡¶¨‡ßã?
=========================================================================================
‡¶è‡¶á ‡¶Ö‡¶ß‡ßç‡¶Ø‡¶æ‡ßü‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶∂‡¶ø‡¶ñ‡¶¨‡ßã:

‚úî Prisma Model Relations (Recap + Advanced)  
‚úî Enum ‡¶ï‡ßÄ  
‚úî Prisma Enum ‡¶ï‡ßÄ‡¶≠‡¶æ‡¶¨‡ßá ‡¶≤‡¶ø‡¶ñ‡¶§‡ßá ‡¶π‡ßü  
‚úî Enum with Model field  
‚úî Enum with Relation  
‚úî Real-world enum examples  
‚úî Common mistakes & best practices  

üëâ Relation + Enum = Production Ready Schema

=========================================================================================
# 1. Relation ‡¶ï‡ßÄ? (Quick Recap)
=========================================================================================
Relation ‡¶Æ‡¶æ‡¶®‡ßá ‡¶π‡¶≤‡ßã ‚Äî

üëâ ‡¶è‡¶ï Model (Table) ‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ö‡¶®‡ßç‡¶Ø Model ‡¶è‡¶∞ Connection  

‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£:
- User ‚Üí Post
- Order ‚Üí Customer
- Booking ‚Üí Vehicle

Prisma ‡¶§‡ßá relation ‡¶∏‡¶¨‡¶∏‡¶Æ‡ßü:
‚úî Explicit  
‚úî Foreign key based  
‚úî Two-sided (best practice)

=========================================================================================
# 2. Relation ‡¶è‡¶∞ Core Rules
=========================================================================================
Prisma relation ‡¶≤‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶Æ‡¶®‡ßá ‡¶∞‡¶æ‡¶ñ‡¶¨‡ßá:

‚úî Foreign key field ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶π‡¶¨‡ßá  
‚úî @relation attribute ‡¶≤‡¶æ‡¶ó‡¶¨‡ßá  
‚úî references ‡¶¶‡¶ø‡¶§‡ßá ‡¶π‡¶¨‡ßá  
‚úî Array side = Many side  

=========================================================================================
# 3. One-to-One Relation
=========================================================================================
‡¶è‡¶ï‡¶ú‡¶® User ‡¶è‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø Profile

-----------------------------------------------------------------------------------------
model User {
  id      Int      @id @default(autoincrement())
  email   String   @unique
  profile Profile?
}

model Profile {
  id     Int    @id @default(autoincrement())
  bio    String
  userId Int    @unique
  user   User   @relation(fields: [userId], references: [id])
}
-----------------------------------------------------------------------------------------

Key points:
- userId ‚Üí Foreign Key
- @unique ‚Üí One-to-One ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßá
- Profile optional (?)


=========================================================================================
# 4. One-to-Many Relation
=========================================================================================
‡¶è‡¶ï‡¶ú‡¶® User ‡¶è‡¶∞ ‡¶Ö‡¶®‡ßá‡¶ï Post

-----------------------------------------------------------------------------------------
model User {
  id    Int    @id @default(autoincrement())
  name  String
  posts Post[]
}

model Post {
  id     Int    @id @default(autoincrement())
  title  String
  userId Int
  user   User   @relation(fields: [userId], references: [id])
}
-----------------------------------------------------------------------------------------

Key points:
- User side ‚Üí Post[]
- Post side ‚Üí Foreign key

=========================================================================================
# 5. Many-to-Many Relation (Implicit)
=========================================================================================
‡¶è‡¶ï‡¶ú‡¶® Student ‡¶Ö‡¶®‡ßá‡¶ï Course ‡¶®‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá

-----------------------------------------------------------------------------------------
model Student {
  id      Int      @id @default(autoincrement())
  name    String
  courses Course[]
}

model Course {
  id        Int       @id @default(autoincrement())
  title     String
  students  Student[]
}
-----------------------------------------------------------------------------------------

üëâ Prisma auto junction table ‡¶¨‡¶æ‡¶®‡¶æ‡¶¨‡ßá  
üëâ Simple use-case ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø best

=========================================================================================
# 6. Many-to-Many Relation (Explicit)
=========================================================================================
‡¶Ø‡¶ñ‡¶® extra field ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶π‡ßü (Real-world case)

-----------------------------------------------------------------------------------------
model Enrollment {
  id        Int      @id @default(autoincrement())
  studentId Int
  courseId  Int
  status    EnrollmentStatus

  student Student @relation(fields: [studentId], references: [id])
  course  Course  @relation(fields: [courseId], references: [id])
}

model Student {
  id          Int          @id @default(autoincrement())
  name        String
  enrollments Enrollment[]
}

model Course {
  id          Int          @id @default(autoincrement())
  title       String
  enrollments Enrollment[]
}
-----------------------------------------------------------------------------------------

=========================================================================================
# 7. Enum ‡¶ï‡ßÄ?
=========================================================================================
Enum ‡¶Æ‡¶æ‡¶®‡ßá ‡¶π‡¶≤‡ßã ‚Äî

üëâ Fixed set of values  
üëâ Arbitrary string ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ  

‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£:
- Role ‚Üí ADMIN | USER
- Status ‚Üí PENDING | APPROVED | REJECTED

üëâ Enum = Data consistency + safety

=========================================================================================
# 8. Prisma Enum ‡¶ï‡ßÄ?
=========================================================================================
Prisma Enum schema.prisma ‡¶§‡ßá define ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü

Syntax:
-----------------------------------------------------------------------------------------
enum EnumName {
  VALUE1
  VALUE2
  VALUE3
}
-----------------------------------------------------------------------------------------

=========================================================================================
# 9. Simple Enum Example
=========================================================================================
User Role enum:

-----------------------------------------------------------------------------------------
enum Role {
  ADMIN
  USER
}
-----------------------------------------------------------------------------------------

User model ‡¶è ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞:

-----------------------------------------------------------------------------------------
model User {
  id    Int   @id @default(autoincrement())
  name  String
  role  Role @default(USER)
}
-----------------------------------------------------------------------------------------

‡¶´‡¶æ‡ßü‡¶¶‡¶æ:
‚úî Invalid role insert ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ  
‚úî Type-safe query  

=========================================================================================
# 10. Enum with Status Field
=========================================================================================
Order status example:

-----------------------------------------------------------------------------------------
enum OrderStatus {
  PENDING
  CONFIRMED
  CANCELLED
  COMPLETED
}

model Order {
  id     Int          @id @default(autoincrement())
  amount Float
  status OrderStatus @default(PENDING)
}
-----------------------------------------------------------------------------------------

=========================================================================================
# 11. Enum + Relation (Real World)
=========================================================================================
Vehicle Rental System example:

-----------------------------------------------------------------------------------------
enum BookingStatus {
  PENDING
  APPROVED
  CANCELLED
  COMPLETED
}

model User {
  id       Int       @id @default(autoincrement())
  name     String
  bookings Booking[]
}

model Vehicle {
  id       Int       @id @default(autoincrement())
  model    String
  bookings Booking[]
}

model Booking {
  id        Int           @id @default(autoincrement())
  userId    Int
  vehicleId Int
  status    BookingStatus @default(PENDING)

  user    User    @relation(fields: [userId], references: [id])
  vehicle Vehicle @relation(fields: [vehicleId], references: [id])
}
-----------------------------------------------------------------------------------------

üëâ Production-level schema ‚úî

=========================================================================================
# 12. Enum Database ‡¶è ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶•‡¶æ‡¶ï‡ßá?
=========================================================================================
PostgreSQL ‡¶è:

‚úî Enum ‚Üí Custom DB enum type  
‚úî Data insert/update ‡¶è strict validation  

üëâ Wrong value ‡¶¶‡¶ø‡¶≤‡ßá DB error ‡¶¶‡¶ø‡¶¨‡ßá

=========================================================================================
# 13. Enum Query Example (Type Safety)
=========================================================================================
-----------------------------------------------------------------------------------------
await prisma.booking.create({
  data: {
    userId: 1,
    vehicleId: 2,
    status: "PENDING", // ‚úÖ
  },
});
-----------------------------------------------------------------------------------------

‡¶≠‡ßÅ‡¶≤ ‡¶ï‡¶∞‡¶≤‡ßá:
-----------------------------------------------------------------------------------------
status: "WAITING" // ‚ùå TypeScript Error
-----------------------------------------------------------------------------------------

=========================================================================================
# 14. Optional Relation + Enum
=========================================================================================
-----------------------------------------------------------------------------------------
model Payment {
  id        Int           @id @default(autoincrement())
  amount    Float
  status    PaymentStatus?
}

enum PaymentStatus {
  SUCCESS
  FAILED
  PENDING
}
-----------------------------------------------------------------------------------------

üëâ status NULL ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá

=========================================================================================
# 15. Common Mistakes
=========================================================================================
‚ùå String ‡¶¶‡¶ø‡ßü‡ßá status handle ‡¶ï‡¶∞‡¶æ  
‚ùå Enum define ‡¶®‡¶æ ‡¶ï‡¶∞‡ßá magic string ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞  
‚ùå Relation ‡¶è‡¶ï ‡¶™‡¶æ‡¶∂‡ßá ‡¶≤‡ßá‡¶ñ‡¶æ  
‚ùå Foreign key miss ‡¶ï‡¶∞‡¶æ  
‚ùå migrate ‡¶®‡¶æ ‡¶ö‡¶æ‡¶≤‡¶æ‡¶®‡ßã  

=========================================================================================
# 16. Best Practices
=========================================================================================
‚úî Status / Role ‚Üí Enum ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßã  
‚úî Relation explicit ‡¶∞‡¶æ‡¶ñ‡ßã  
‚úî Meaningful enum name ‡¶¶‡¶æ‡¶ì  
‚úî Default value ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßã  
‚úî Schema change ‚Üí migrate dev  

=========================================================================================
# 17. Summary (Final Takeaway)
=========================================================================================
- Relation = Table connection
- Prisma relation explicit & strict
- Enum = Fixed & safe values
- Relation + Enum = Production-ready design
- Bug ‡¶ï‡¶Æ‡ßá, code clean ‡¶•‡¶æ‡¶ï‡ßá
- Prisma schema = Backend foundation

=========================================================================================
                                   THE END
=========================================================================================
