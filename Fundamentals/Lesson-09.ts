=========================================================================================
                 UPDATING & DELETING DATA WITH PRISMA (A‚ÄìZ)
=========================================================================================

=========================================================================================
# 0. ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶è‡¶á ‡¶Ö‡¶Ç‡¶∂‡ßá ‡¶ï‡ßÄ ‡¶∂‡¶ø‡¶ñ‡¶¨‡ßã?
=========================================================================================
‡¶è‡¶á ‡¶Ö‡¶ß‡ßç‡¶Ø‡¶æ‡ßü‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶∂‡¶ø‡¶ñ‡¶¨‡ßã:

‚úî Prisma ‡¶¶‡¶ø‡ßü‡ßá data UPDATE ‡¶ï‡¶∞‡¶æ  
‚úî update() vs updateMany()  
‚úî Relation ‡¶∏‡¶π update  
‚úî Enum update  
‚úî Data DELETE ‡¶ï‡¶∞‡¶æ  
‚úî delete() vs deleteMany()  
‚úî Safe delete patterns  
‚úî Common mistakes & best practices  

üëâ CRUD ‡¶è‡¶∞ ‡¶∂‡ßá‡¶∑ ‡¶è‡¶¨‡¶Ç ‡¶ñ‡ßÅ‡¶¨ ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶Ö‡¶Ç‡¶∂

=========================================================================================
# 1. Prisma ‡¶è Data Update ‡¶Æ‡¶æ‡¶®‡ßá ‡¶ï‡ßÄ?
=========================================================================================
Data Update ‡¶Æ‡¶æ‡¶®‡ßá ‡¶π‡¶≤‡ßã ‚Äî

üëâ Database ‡¶è ‡¶•‡¶æ‡¶ï‡¶æ record ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ  
üëâ SQL ‡¶è‡¶∞ UPDATE query ‡¶è‡¶∞ equivalent  

Prisma ‡¶è:
-----------------------------------------------------------------------------------------
update()
updateMany()
-----------------------------------------------------------------------------------------
‡¶è‡¶á ‡¶¶‡ßÅ‡¶á‡¶ü‡¶æ method ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶π‡ßü

=========================================================================================
# 2. update() Method (Single Record)
=========================================================================================
update() ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶π‡ßü ‚Äî

üëâ ‡¶è‡¶ï‡¶ü‡¶ø specific record update ‡¶ï‡¶∞‡¶§‡ßá  
üëâ ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á UNIQUE field ‡¶≤‡¶æ‡¶ó‡¶¨‡ßá  

Basic syntax:
-----------------------------------------------------------------------------------------
await prisma.modelName.update({
  where: {
    uniqueField: value,
  },
  data: {
    field: newValue,
  },
});
-----------------------------------------------------------------------------------------

=========================================================================================
# 3. Simple Update Example
=========================================================================================
User name update ‡¶ï‡¶∞‡¶ø (email ‡¶¶‡¶ø‡ßü‡ßá):

-----------------------------------------------------------------------------------------
await prisma.user.update({
  where: {
    email: "ridoan@gmail.com",
  },
  data: {
    name: "Updated Ridoan",
  },
});
-----------------------------------------------------------------------------------------

‡¶ï‡¶ø ‡¶π‡¶¨‡ßá?
‚úî ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶ê user update ‡¶π‡¶¨‡ßá  
‚ùå ‡¶®‡¶æ ‡¶™‡ßá‡¶≤‡ßá error throw ‡¶ï‡¶∞‡¶¨‡ßá  

=========================================================================================
# 4. updateMany() Method
=========================================================================================
updateMany() ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶π‡ßü ‚Äî

üëâ ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï record update ‡¶ï‡¶∞‡¶§‡ßá  
üëâ UNIQUE field ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶®‡¶æ‡¶á  

Syntax:
-----------------------------------------------------------------------------------------
await prisma.modelName.updateMany({
  where: {
    condition,
  },
  data: {
    field: value,
  },
});
-----------------------------------------------------------------------------------------

=========================================================================================
# 5. updateMany() Example
=========================================================================================
‡¶∏‡¶¨ pending booking approve ‡¶ï‡¶∞‡¶ø:

-----------------------------------------------------------------------------------------
await prisma.booking.updateMany({
  where: {
    status: "PENDING",
  },
  data: {
    status: "APPROVED",
  },
});
-----------------------------------------------------------------------------------------

üëâ ‡¶ï‡¶§‡¶ó‡ßÅ‡¶≤‡ßã update ‡¶π‡¶≤‡ßã count return ‡¶ï‡¶∞‡ßá

=========================================================================================
# 6. Enum Field Update
=========================================================================================
Enum update fully type-safe:

-----------------------------------------------------------------------------------------
await prisma.booking.update({
  where: {
    id: 1,
  },
  data: {
    status: "COMPLETED",
  },
});
-----------------------------------------------------------------------------------------

‚ùå ‡¶≠‡ßÅ‡¶≤ enum value ‡¶¶‡¶ø‡¶≤‡ßá ‚Üí TypeScript error

=========================================================================================
# 7. Relation ‡¶∏‡¶π Update (Nested Update)
=========================================================================================
User + Profile update:

-----------------------------------------------------------------------------------------
await prisma.user.update({
  where: {
    id: 1,
  },
  data: {
    name: "New Name",
    profile: {
      update: {
        bio: "Updated bio",
      },
    },
  },
});
-----------------------------------------------------------------------------------------

üëâ Parent + child ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá update

=========================================================================================
# 8. Relation Connect / Disconnect
=========================================================================================
Relation change ‡¶ï‡¶∞‡¶æ:

Connect:
-----------------------------------------------------------------------------------------
await prisma.post.update({
  where: { id: 5 },
  data: {
    user: {
      connect: { id: 1 },
    },
  },
});
-----------------------------------------------------------------------------------------

Disconnect:
-----------------------------------------------------------------------------------------
await prisma.post.update({
  where: { id: 5 },
  data: {
    user: {
      disconnect: true,
    },
  },
});
-----------------------------------------------------------------------------------------

=========================================================================================
# 9. Increment / Decrement Update
=========================================================================================
Numeric field update shortcut:

-----------------------------------------------------------------------------------------
await prisma.vehicle.update({
  where: { id: 1 },
  data: {
    totalBookings: {
      increment: 1,
    },
  },
});
-----------------------------------------------------------------------------------------

Available operations:
-----------------------------------------------------------------------------------------
increment | decrement | multiply | divide
-----------------------------------------------------------------------------------------

=========================================================================================
# 10. Prisma ‡¶è Data Delete ‡¶Æ‡¶æ‡¶®‡ßá ‡¶ï‡ßÄ?
=========================================================================================
Data Delete ‡¶Æ‡¶æ‡¶®‡ßá ‡¶π‡¶≤‡ßã ‚Äî

üëâ Database ‡¶•‡ßá‡¶ï‡ßá record remove ‡¶ï‡¶∞‡¶æ  
üëâ SQL ‡¶è‡¶∞ DELETE query equivalent  

Prisma ‡¶è:
-----------------------------------------------------------------------------------------
delete()
deleteMany()
-----------------------------------------------------------------------------------------

=========================================================================================
# 11. delete() Method (Single Record)
=========================================================================================
delete() ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶π‡ßü ‚Äî

üëâ UNIQUE field ‡¶¶‡¶ø‡ßü‡ßá  
üëâ ‡¶è‡¶ï‡¶ü‡¶ø‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ record delete ‡¶ï‡¶∞‡¶§‡ßá  

Example:
-----------------------------------------------------------------------------------------
await prisma.user.delete({
  where: {
    email: "test@gmail.com",
  },
});
-----------------------------------------------------------------------------------------

‚ùå ‡¶®‡¶æ ‡¶™‡ßá‡¶≤‡ßá error throw ‡¶ï‡¶∞‡¶¨‡ßá

=========================================================================================
# 12. deleteMany() Method
=========================================================================================
‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï record delete:

-----------------------------------------------------------------------------------------
await prisma.booking.deleteMany({
  where: {
    status: "CANCELLED",
  },
});
-----------------------------------------------------------------------------------------

üëâ ‡¶ï‡¶§‡¶ó‡ßÅ‡¶≤‡ßã delete ‡¶π‡ßü‡ßá‡¶õ‡ßá count return ‡¶ï‡¶∞‡ßá

=========================================================================================
# 13. Relation Constraint & Delete
=========================================================================================
Foreign key ‡¶•‡¶æ‡¶ï‡¶≤‡ßá:

‚ùå Direct delete ‡¶ï‡¶∞‡¶≤‡ßá error ‡¶Ü‡¶∏‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá  

Solution:
‚úî Cascade delete  
‚úî Or child ‡¶Ü‡¶ó‡ßá delete ‡¶ï‡¶∞‡¶æ  

Example:
-----------------------------------------------------------------------------------------
await prisma.booking.deleteMany({
  where: {
    userId: 1,
  },
});

await prisma.user.delete({
  where: {
    id: 1,
  },
});
-----------------------------------------------------------------------------------------

=========================================================================================
# 14. Soft Delete Pattern (Real World)
=========================================================================================
Production ‡¶è direct delete ‡¶ï‡¶Æ ‡¶π‡ßü  

Soft delete example:

-----------------------------------------------------------------------------------------
model User {
  id        Int      @id @default(autoincrement())
  name      String
  isDeleted Boolean  @default(false)
}
-----------------------------------------------------------------------------------------

Soft delete query:
-----------------------------------------------------------------------------------------
await prisma.user.update({
  where: { id: 1 },
  data: { isDeleted: true },
});
-----------------------------------------------------------------------------------------

üëâ Data ‡¶•‡¶æ‡¶ï‡ßá, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ hidden

=========================================================================================
# 15. Common Mistakes
=========================================================================================
‚ùå update() ‡¶è non-unique field  
‚ùå delete() ‡¶è relation ignore ‡¶ï‡¶∞‡¶æ  
‚ùå updateMany result check ‡¶®‡¶æ ‡¶ï‡¶∞‡¶æ  
‚ùå Production ‡¶è hard delete  
‚ùå Migration ‡¶®‡¶æ ‡¶ö‡¶æ‡¶≤‡¶æ‡¶®‡ßã  

=========================================================================================
# 16. Best Practices
=========================================================================================
‚úî update ‚Üí unique field  
‚úî bulk update ‚Üí updateMany  
‚úî Enum ‡¶¶‡¶ø‡ßü‡ßá status manage ‡¶ï‡¶∞‡ßã  
‚úî delete ‡¶è‡¶∞ ‡¶Ü‡¶ó‡ßá relation ‡¶ö‡¶ø‡¶®‡ßç‡¶§‡¶æ ‡¶ï‡¶∞‡ßã  
‚úî Soft delete prefer ‡¶ï‡¶∞‡ßã  

=========================================================================================
# 17. Summary (Final Takeaway)
=========================================================================================
- update() ‚Üí single record
- updateMany() ‚Üí bulk update
- delete() ‚Üí single delete
- deleteMany() ‚Üí bulk delete
- Nested update powerful
- Soft delete = production safe
- Prisma update/delete clean & type-safe
=========================================================================================
                                   THE END
=========================================================================================
